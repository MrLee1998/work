<script>
  let arr = [1, 1, 2, '1', 3, 2, 1]
  function unique(arr) {
    let res = [];
    for (var i = 0; i < arr.length; i++) {
      for (var j = 0; j < res.length; j++) {
        if(arr[i] === res[j]) {
          break;
        }
        console.log('j');
      }
      if (j === res.length) {
          res.push(arr[i])
      }
    }
    return res
  }
  function unique2(arr) {
    let res = [];
    for (var i = 0; i < arr.length; i++) {
      if (res.indexOf(arr[i]) === -1) {
        res.push(arr[i])
      }
    }
    return res
  }
  function unique3(arr) {
    let newArr = arr.concat().sort();
    console.log(newArr);
    let res = [];
    let temp;
    for(var i=0; i<newArr.length; i++) {
      if(!i || temp !== newArr[i]) {
        res.push(newArr[i])
      } 
      temp = newArr[i]
    }
    return res
  }
  function unique4(arr) {
    return arr.concat().sort().filter(function(item, index, arr) {
      // return arr.indexOf(item) === index
      return !index || item !== arr[index-1]
    })
  }
  // console.log(unique(arr));
  // console.log(unique2(arr));
  console.log(unique3(arr)); //
  // console.log(unique4(arr));
</script>