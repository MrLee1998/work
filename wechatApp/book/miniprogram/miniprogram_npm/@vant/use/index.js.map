{"version":3,"sources":["index.js","utils.js","useRect/index.js","useToggle/index.js","useRelation/index.js","useRelation/useParent.js","useRelation/useChildren.js","useCountDown/index.js","useClickAway/index.js","useEventListener/index.js","onMountedOrActivated/index.js","useWindowSize/index.js","useScrollParent/index.js","usePageVisibility/index.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,AENA,ADGA,AFMA;ADIA,AENA,AENA,ADGA,AFMA;ADIA,AENA,AENA,ADGA,AFMA;ADIA,AENA,AENA,ACHA,AFMA,AFMA;ADIA,AENA,AENA,ACHA,AFMA,AFMA;ADIA,AENA,AENA,ACHA,AFMA,AFMA;ADIA,AENA,AENA,AENA,ADGA,AFMA,AFMA;ADIA,AENA,AENA,AENA,ADGA,AFMA,AFMA;ADIA,AENA,AENA,AENA,ADGA,AFMA,AFMA;ADIA,AOrBA,ALeA,AENA,AENA,ADGA,AFMA,AFMA;ADIA,AOrBA,ALeA,AENA,AENA,ADGA,AFMA,AFMA;ADIA,AOrBA,ALeA,AENA,AENA,ADGA,AFMA,AFMA;AOpBA,ADGA,ALeA,AENA,AENA,ADGA,AJYA;AOpBA,ADGA,ALeA,AENA,AENA,ADGA,AJYA;AOpBA,ADGA,ALeA,AENA,AENA,ADGA,AJYA;AOpBA,ADGA,AENA,APqBA,AIZA,ADGA,AJYA;AOpBA,ADGA,AENA,APqBA,AIZA,ADGA,AJYA;AOpBA,ADGA,AENA,APqBA,AIZA,ADGA,AJYA;AS1BA,AFMA,ADGA,AENA,APqBA,AIZA,ADGA,AJYA;AS1BA,AFMA,ADGA,AENA,APqBA,AIZA,ADGA,AJYA;AS1BA,AFMA,ADGA,AENA,APqBA,AIZA,ADGA,AJYA;AS1BA,AFMA,ADGA,AENA,APqBA,AIZA,ADGA,AMlBA,AV8BA;AS1BA,AFMA,ADGA,AENA,APqBA,AIZA,ADGA,AMlBA;ADIA,AFMA,ADGA,AENA,APqBA,AIZA,ADGA,AMlBA;ADIA,AFMA,ADGA,AENA,APqBA,AIZA,ADGA,AOrBA,ADGA;ADIA,AFMA,ADGA,AENA,APqBA,AIZA,ADGA,AOrBA,ADGA;ADIA,AFMA,ADGA,AENA,APqBA,AIZA,ADGA,AOrBA,ADGA;ADIA,AFMA,ADGA,AENA,AIZA,AXiCA,AIZA,ADGA,AOrBA,ADGA;ADIA,AFMA,ADGA,AENA,AIZA,APqBA,ADGA,AOrBA,ADGA;ADIA,AFMA,ADGA,AENA,AIZA,APqBA,ADGA,AOrBA,ADGA;ADIA,AFMA,ADGA,AENA,AIZA,APqBA,ADGA,AOrBA,ADGA;ADIA,AFMA,ADGA,AENA,AIZA,APqBA,ADGA,AOrBA,ADGA;ADIA,AFMA,ADGA,AENA,AIZA,APqBA,ADGA,AOrBA,ADGA;ADIA,AFMA,ADGA,AENA,AIZA,APqBA,ADGA,AOrBA,ADGA;ADIA,AHSA,AENA,AIZA,APqBA,ADGA,AOrBA,ADGA;ADIA,AHSA,AENA,AIZA,APqBA,ADGA,AOrBA,ADGA;ADIA,AHSA,AENA,AIZA,APqBA,ADGA,AOrBA,ADGA;ADIA,AHSA,AENA,AIZA,APqBA,ADGA,AOrBA,ADGA;AJaA,AENA,AIZA,APqBA,ADGA,AOrBA,ADGA;AJaA,AENA,AIZA,APqBA,AMlBA,ADGA;AJaA,AENA,AIZA,APqBA,AMlBA;ALgBA,AENA,AIZA,APqBA,AMlBA;ALgBA,AENA,AIZA,APqBA,AMlBA;ALgBA,AENA,AIZA,APqBA,AMlBA;ALgBA,AENA,AIZA,APqBA,AMlBA;ALgBA,AENA,AIZA,APqBA,AMlBA;ALgBA,AENA,AHSA,AMlBA;ALgBA,AENA,AHSA,AMlBA;ALgBA,AENA,AHSA,AMlBA;ALgBA,AENA,AHSA,AMlBA;ALgBA,AENA,AHSA,AMlBA;ALgBA,AENA,AHSA,AMlBA;ALgBA,AENA,AHSA,AMlBA;ALgBA,AENA,AHSA,AMlBA;ALgBA,AENA,AHSA,AMlBA;ALgBA,AENA,AHSA,AMlBA;ALgBA,AENA,AHSA,AMlBA;ALgBA,AENA,AHSA,AMlBA;ALgBA,AENA,AHSA,AMlBA;ALgBA,AENA,AHSA,AMlBA;ALgBA,AENA,AHSA,AMlBA;ALgBA,AENA,AHSA,AMlBA;ALgBA,ADGA,AMlBA;ALgBA,ADGA,AMlBA;ALgBA,ADGA,AMlBA;ALgBA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./utils\"), exports);\n__exportStar(require(\"./useRect\"), exports);\n__exportStar(require(\"./useToggle\"), exports);\n__exportStar(require(\"./useRelation\"), exports);\n__exportStar(require(\"./useCountDown\"), exports);\n__exportStar(require(\"./useClickAway\"), exports);\n__exportStar(require(\"./useWindowSize\"), exports);\n__exportStar(require(\"./useScrollParent\"), exports);\n__exportStar(require(\"./useEventListener\"), exports);\n__exportStar(require(\"./usePageVisibility\"), exports);\n__exportStar(require(\"./onMountedOrActivated\"), exports);\n","\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.doubleRaf = exports.cancelRaf = exports.raf = exports.inBrowser = void 0;\nexports.inBrowser = typeof window !== 'undefined';\nvar root = (exports.inBrowser ? window : global);\nvar prev = Date.now();\nfunction rafPolyfill(fn) {\n    var curr = Date.now();\n    var ms = Math.max(0, 16 - (curr - prev));\n    var id = setTimeout(fn, ms);\n    prev = curr + ms;\n    return id;\n}\nfunction raf(fn) {\n    var requestAnimationFrame = root.requestAnimationFrame || rafPolyfill;\n    return requestAnimationFrame.call(root, fn);\n}\nexports.raf = raf;\nfunction cancelRaf(id) {\n    var cancelAnimationFrame = root.cancelAnimationFrame || root.clearTimeout;\n    cancelAnimationFrame.call(root, id);\n}\nexports.cancelRaf = cancelRaf;\n// double raf for animation\nfunction doubleRaf(fn) {\n    raf(function () {\n        raf(fn);\n    });\n}\nexports.doubleRaf = doubleRaf;\n","\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useRect = void 0;\nvar vue_1 = require(\"vue\");\nfunction isWindow(val) {\n    return val === window;\n}\nexports.useRect = function (elementRef) {\n    var element = vue_1.unref(elementRef);\n    if (isWindow(element)) {\n        var width = element.innerWidth;\n        var height = element.innerHeight;\n        return {\n            top: 0,\n            left: 0,\n            right: width,\n            bottom: height,\n            width: width,\n            height: height,\n        };\n    }\n    if (element && element.getBoundingClientRect) {\n        return element.getBoundingClientRect();\n    }\n    return {\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        width: 0,\n        height: 0,\n    };\n};\n","\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useToggle = void 0;\nvar vue_1 = require(\"vue\");\nfunction useToggle(defaultValue) {\n    if (defaultValue === void 0) { defaultValue = false; }\n    var state = vue_1.ref(defaultValue);\n    var toggle = function (value) {\n        if (value === void 0) { value = !state.value; }\n        state.value = value;\n    };\n    return [state, toggle];\n}\nexports.useToggle = useToggle;\n","\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./useParent\"), exports);\n__exportStar(require(\"./useChildren\"), exports);\n","\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useParent = void 0;\nvar vue_1 = require(\"vue\");\nfunction useParent(key) {\n    var parent = vue_1.inject(key, null);\n    if (parent) {\n        var instance_1 = vue_1.getCurrentInstance();\n        if (instance_1) {\n            var link = parent.link, unlink_1 = parent.unlink, internalChildren_1 = parent.internalChildren, rest = __rest(parent, [\"link\", \"unlink\", \"internalChildren\"]);\n            link(instance_1);\n            vue_1.onUnmounted(function () {\n                unlink_1(instance_1);\n            });\n            var index = vue_1.computed(function () { return internalChildren_1.indexOf(instance_1); });\n            return {\n                parent: rest,\n                index: index,\n            };\n        }\n    }\n    return {};\n}\nexports.useParent = useParent;\n","\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useChildren = exports.sortChildren = exports.flattenVNodes = void 0;\nvar vue_1 = require(\"vue\");\nfunction flattenVNodes(children) {\n    var result = [];\n    var traverse = function (children) {\n        if (Array.isArray(children)) {\n            children.forEach(function (child) {\n                var _a;\n                if (vue_1.isVNode(child)) {\n                    result.push(child);\n                    if ((_a = child.component) === null || _a === void 0 ? void 0 : _a.subTree) {\n                        traverse(child.component.subTree.children);\n                    }\n                    if (child.children) {\n                        traverse(child.children);\n                    }\n                }\n            });\n        }\n    };\n    traverse(children);\n    return result;\n}\nexports.flattenVNodes = flattenVNodes;\n// sort children instances by vnodes order\nfunction sortChildren(parent, publicChildren, internalChildren) {\n    var vnodes = flattenVNodes(parent.subTree.children);\n    internalChildren.sort(function (a, b) { return vnodes.indexOf(a.vnode) - vnodes.indexOf(b.vnode); });\n    var orderedPublicChildren = internalChildren.map(function (item) { return item.proxy; });\n    publicChildren.sort(function (a, b) {\n        var indexA = orderedPublicChildren.indexOf(a);\n        var indexB = orderedPublicChildren.indexOf(b);\n        return indexA - indexB;\n    });\n}\nexports.sortChildren = sortChildren;\nfunction useChildren(key) {\n    var publicChildren = vue_1.reactive([]);\n    var internalChildren = vue_1.reactive([]);\n    var parent = vue_1.getCurrentInstance();\n    var linkChildren = function (value) {\n        var link = function (child) {\n            if (child.proxy) {\n                internalChildren.push(child);\n                publicChildren.push(child.proxy);\n                sortChildren(parent, publicChildren, internalChildren);\n            }\n        };\n        var unlink = function (child) {\n            var index = internalChildren.indexOf(child);\n            publicChildren.splice(index, 1);\n            internalChildren.splice(index, 1);\n        };\n        vue_1.provide(key, __assign({ link: link,\n            unlink: unlink, children: publicChildren, internalChildren: internalChildren }, value));\n    };\n    return {\n        children: publicChildren,\n        linkChildren: linkChildren,\n    };\n}\nexports.useChildren = useChildren;\n","\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useCountDown = void 0;\nvar vue_1 = require(\"vue\");\nvar utils_1 = require(\"../utils\");\nvar SECOND = 1000;\nvar MINUTE = 60 * SECOND;\nvar HOUR = 60 * MINUTE;\nvar DAY = 24 * HOUR;\nfunction parseTime(time) {\n    var days = Math.floor(time / DAY);\n    var hours = Math.floor((time % DAY) / HOUR);\n    var minutes = Math.floor((time % HOUR) / MINUTE);\n    var seconds = Math.floor((time % MINUTE) / SECOND);\n    var milliseconds = Math.floor(time % SECOND);\n    return {\n        total: time,\n        days: days,\n        hours: hours,\n        minutes: minutes,\n        seconds: seconds,\n        milliseconds: milliseconds,\n    };\n}\nfunction isSameSecond(time1, time2) {\n    return Math.floor(time1 / 1000) === Math.floor(time2 / 1000);\n}\nfunction useCountDown(options) {\n    var rafId;\n    var endTime;\n    var counting;\n    var deactivated;\n    var remain = vue_1.ref(options.time);\n    var current = vue_1.computed(function () { return parseTime(remain.value); });\n    var pause = function () {\n        counting = false;\n        utils_1.cancelRaf(rafId);\n    };\n    var getCurrentRemain = function () { return Math.max(endTime - Date.now(), 0); };\n    var setRemain = function (value) {\n        var _a, _b;\n        remain.value = value;\n        (_a = options.onChange) === null || _a === void 0 ? void 0 : _a.call(options, current.value);\n        if (value === 0) {\n            pause();\n            (_b = options.onFinish) === null || _b === void 0 ? void 0 : _b.call(options);\n        }\n    };\n    var microTick = function () {\n        rafId = utils_1.raf(function () {\n            // in case of call reset immediately after finish\n            if (counting) {\n                setRemain(getCurrentRemain());\n                if (remain.value > 0) {\n                    microTick();\n                }\n            }\n        });\n    };\n    var macroTick = function () {\n        rafId = utils_1.raf(function () {\n            // in case of call reset immediately after finish\n            if (counting) {\n                var remainRemain = getCurrentRemain();\n                if (!isSameSecond(remainRemain, remain.value) || remainRemain === 0) {\n                    setRemain(remainRemain);\n                }\n                if (remain.value > 0) {\n                    macroTick();\n                }\n            }\n        });\n    };\n    var tick = function () {\n        if (options.millisecond) {\n            microTick();\n        }\n        else {\n            macroTick();\n        }\n    };\n    var start = function () {\n        if (!counting) {\n            endTime = Date.now() + remain.value;\n            counting = true;\n            tick();\n        }\n    };\n    var reset = function (totalTime) {\n        if (totalTime === void 0) { totalTime = options.time; }\n        pause();\n        remain.value = totalTime;\n    };\n    vue_1.onBeforeUnmount(pause);\n    vue_1.onActivated(function () {\n        if (deactivated) {\n            counting = true;\n            deactivated = false;\n            tick();\n        }\n    });\n    vue_1.onDeactivated(function () {\n        if (counting) {\n            pause();\n            deactivated = true;\n        }\n    });\n    return {\n        start: start,\n        pause: pause,\n        reset: reset,\n        current: current,\n    };\n}\nexports.useCountDown = useCountDown;\n","\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useClickAway = void 0;\nvar vue_1 = require(\"vue\");\nvar utils_1 = require(\"../utils\");\nvar useEventListener_1 = require(\"../useEventListener\");\nfunction useClickAway(target, listener, options) {\n    if (options === void 0) { options = {}; }\n    if (!utils_1.inBrowser) {\n        return;\n    }\n    var _a = options.eventName, eventName = _a === void 0 ? 'click' : _a;\n    var onClick = function (event) {\n        var element = vue_1.unref(target);\n        if (element && !element.contains(event.target)) {\n            listener(event);\n        }\n    };\n    useEventListener_1.useEventListener(eventName, onClick, { target: document });\n}\nexports.useClickAway = useClickAway;\n","\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useEventListener = void 0;\nvar vue_1 = require(\"vue\");\nvar onMountedOrActivated_1 = require(\"../onMountedOrActivated\");\nvar utils_1 = require(\"../utils\");\nvar supportsPassive = false;\nif (utils_1.inBrowser) {\n    try {\n        var opts = {};\n        Object.defineProperty(opts, 'passive', {\n            get: function () {\n                supportsPassive = true;\n            },\n        });\n        window.addEventListener('test-passive', null, opts);\n        // eslint-disable-next-line no-empty\n    }\n    catch (e) { }\n}\nfunction useEventListener(type, listener, options) {\n    if (options === void 0) { options = {}; }\n    if (!utils_1.inBrowser) {\n        return;\n    }\n    var _a = options.target, target = _a === void 0 ? window : _a, _b = options.passive, passive = _b === void 0 ? false : _b, _c = options.capture, capture = _c === void 0 ? false : _c;\n    var attached;\n    var add = function () {\n        var element = vue_1.unref(target);\n        if (element && !attached) {\n            element.addEventListener(type, listener, supportsPassive ? { capture: capture, passive: passive } : capture);\n            attached = true;\n        }\n    };\n    var remove = function () {\n        var element = vue_1.unref(target);\n        if (element && attached) {\n            element.removeEventListener(type, listener, capture);\n            attached = false;\n        }\n    };\n    vue_1.onUnmounted(remove);\n    vue_1.onDeactivated(remove);\n    onMountedOrActivated_1.onMountedOrActivated(add);\n}\nexports.useEventListener = useEventListener;\n","\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.onMountedOrActivated = void 0;\nvar vue_1 = require(\"vue\");\nfunction onMountedOrActivated(hook) {\n    var mounted;\n    vue_1.onMounted(function () {\n        hook();\n        vue_1.nextTick(function () {\n            mounted = true;\n        });\n    });\n    vue_1.onActivated(function () {\n        if (mounted) {\n            hook();\n        }\n    });\n}\nexports.onMountedOrActivated = onMountedOrActivated;\n","\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useWindowSize = void 0;\nvar vue_1 = require(\"vue\");\nvar utils_1 = require(\"../utils\");\nvar useEventListener_1 = require(\"../useEventListener\");\nfunction useWindowSize() {\n    var width = vue_1.ref(utils_1.inBrowser ? window.innerWidth : 0);\n    var height = vue_1.ref(utils_1.inBrowser ? window.innerHeight : 0);\n    var onResize = function () {\n        width.value = window.innerWidth;\n        height.value = window.innerHeight;\n    };\n    useEventListener_1.useEventListener('resize', onResize);\n    useEventListener_1.useEventListener('orientationchange', onResize);\n    return { width: width, height: height };\n}\nexports.useWindowSize = useWindowSize;\n","\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useScrollParent = void 0;\nvar vue_1 = require(\"vue\");\nvar overflowScrollReg = /scroll|auto/i;\nfunction isElement(node) {\n    var ELEMENT_NODE_TYPE = 1;\n    return node.tagName !== 'HTML' && node.nodeType === ELEMENT_NODE_TYPE;\n}\n// http://w3help.org/zh-cn/causes/SD9013\n// http://stackoverflow.com/questions/17016740/onscroll-function-is-not-working-for-chrome\nfunction getScrollParent(el, root) {\n    if (root === void 0) { root = window; }\n    var node = el;\n    while (node && node !== root && isElement(node)) {\n        var overflowY = window.getComputedStyle(node).overflowY;\n        if (overflowScrollReg.test(overflowY)) {\n            if (node.tagName !== 'BODY') {\n                return node;\n            }\n            // see: https://github.com/youzan/vant/issues/3823\n            var htmlOverflowY = window.getComputedStyle(node.parentNode).overflowY;\n            if (overflowScrollReg.test(htmlOverflowY)) {\n                return node;\n            }\n        }\n        node = node.parentNode;\n    }\n    return root;\n}\nfunction useScrollParent(el) {\n    var scrollParent = vue_1.ref();\n    vue_1.onMounted(function () {\n        if (el.value) {\n            scrollParent.value = getScrollParent(el.value);\n        }\n    });\n    return scrollParent;\n}\nexports.useScrollParent = useScrollParent;\n","\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.usePageVisibility = void 0;\nvar vue_1 = require(\"vue\");\nvar utils_1 = require(\"../utils\");\nvar useEventListener_1 = require(\"../useEventListener\");\nfunction usePageVisibility() {\n    var visibility = vue_1.ref('visible');\n    var setVisibility = function () {\n        if (utils_1.inBrowser) {\n            visibility.value = document.hidden ? 'hidden' : 'visible';\n        }\n    };\n    setVisibility();\n    useEventListener_1.useEventListener('visibilitychange', setVisibility);\n    return visibility;\n}\nexports.usePageVisibility = usePageVisibility;\n"]}